<html>
    <body>
        <div id="testsResults">
            <p>Tests running...</p>
        </div>
    </body>
<script>
    // tests
    var _updateUI = function(name, result) {
        var color = 'green';
        if(!result) color = 'red';
        document.getElementById('testsResults').innerHTML += '<p style="color:' + color + '">' + name + ': ' + result + '</p>';
    };
    var _test = function(name, b) {
        return function(a) {_updateUI(name, (JSON.stringify(a) === JSON.stringify(b)))};
    };

    var _appendTest = function(params) {
        var my_awesome_script = document.createElement('script');
        my_awesome_script.setAttribute('src','https://script.google.com/macros/s/AKfycbxcdb59Q8e-FvAz9IqOPIWa5cHd9gPNvZo1251NNTCtmTcYzORz/exec?' + params);
        document.head.appendChild(my_awesome_script);
    };

    var assert_helloWorld = _test('assert_helloWorld', {hello: 'world'});
    _appendTest('callback=assert_helloWorld&method=helloWorld');

    var assert_getUserName = _test('assert_getUserName', {user: 'michelet.tristan@gmail.com'}); // FIXME put username
    _appendTest('callback=assert_getUserName&method=getUserName');

    // var assert_createSpreadSheet = _test('assert_createSpreadSheet', {});
    // _appendTest('callback=assert_createSpreadSheet&method=createSpreadSheet&name=testSpreadsheet');

    // var assert_createSheet = _test('assert_createSheet', {});
    // _appendTest('callback=assert_createSheet&method=createSheet');

    var assert_getUserSpreadSheet = _test('assert_getUserSpreadSheet', {spreadSheetURL: 'https://docs.google.com/spreadsheets/d/1IF3rPgEA20aZ0zA5JQg66Dy8LOh1GBkFvHc1gZ8jLIc/edit'}); // FIXME put file
    _appendTest('callback=assert_getUserSpreadSheet&method=getUserSpreadSheet&key=Test SpreadSheetAPI');

    // var assert_setUserSpreadSheet = _test('assert_setUserSpreadSheet', {hello: 'world'});
    // _appendTest('callback=assert_setUserSpreadSheet&method=setUserSpreadSheet');

    var testSpreadsheetData = {"content":[{"name":"first","id":0,"content":[[1,"",""],[2,3,""],["",4,5]]},{"name":"second","id":1,"content":[["a","b"],["c","d"]]}]};
    var assert_getSpreadSheet = _test('assert_getSpreadSheet', testSpreadsheetData);
    _appendTest('callback=assert_getSpreadSheet&method=getSpreadSheet&url=https://docs.google.com/spreadsheets/d/1IF3rPgEA20aZ0zA5JQg66Dy8LOh1GBkFvHc1gZ8jLIc/edit');

    // var assert_getValue = _test('assert_getValue', {});
    // _appendTest('callback=assert_getValue&method=getValue');

    // var assert_insert = _test('assert_insert', {});
    // _appendTest('callback=assert_insert&method=insert');

    // var assert_wrong = _test('assert_wrong', {});
    // _appendTest('callback=assert_wrong&method=wrong');


</script>
</html>
